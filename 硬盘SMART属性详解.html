<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="硬盘,">





  <link rel="alternate" href="/atom.xml" title="一头乌黑白发" type="application/atom+xml">






<meta name="description" content="一、SMART概述 S.M.A.R.T（Self-Monitoring Analysis And Reporting Technology），即“自我监测、分析及报告技术”，是一种自动监控硬盘驱动器完好状况和报告潜在问题的技术标准。支持S.M.A.R.T技术的硬盘可以通过硬盘上的监测指令和主机上的监测软件对磁头、盘片、马达、电路的运行情况、历史记录及预设的安全值进行分析、比较。当出现安全值范围以外">
<meta name="keywords" content="硬盘">
<meta property="og:type" content="article">
<meta property="og:title" content="硬盘SMART属性详解">
<meta property="og:url" content="https://blog.zqifei.com/硬盘SMART属性详解.html">
<meta property="og:site_name" content="一头乌黑白发">
<meta property="og:description" content="一、SMART概述 S.M.A.R.T（Self-Monitoring Analysis And Reporting Technology），即“自我监测、分析及报告技术”，是一种自动监控硬盘驱动器完好状况和报告潜在问题的技术标准。支持S.M.A.R.T技术的硬盘可以通过硬盘上的监测指令和主机上的监测软件对磁头、盘片、马达、电路的运行情况、历史记录及预设的安全值进行分析、比较。当出现安全值范围以外">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-06-17T03:15:09.800Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="硬盘SMART属性详解">
<meta name="twitter:description" content="一、SMART概述 S.M.A.R.T（Self-Monitoring Analysis And Reporting Technology），即“自我监测、分析及报告技术”，是一种自动监控硬盘驱动器完好状况和报告潜在问题的技术标准。支持S.M.A.R.T技术的硬盘可以通过硬盘上的监测指令和主机上的监测软件对磁头、盘片、马达、电路的运行情况、历史记录及预设的安全值进行分析、比较。当出现安全值范围以外">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.zqifei.com/硬盘SMART属性详解.html">





  <title>硬盘SMART属性详解 | 一头乌黑白发</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?84dd3dcf0326b2dde34f8e0a537c5120";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一头乌黑白发</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.zqifei.com/硬盘SMART属性详解.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiFei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一头乌黑白发">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">硬盘SMART属性详解</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-17T10:48:54+08:00">
                2020-06-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="一、SMART概述"><a href="#一、SMART概述" class="headerlink" title="一、SMART概述"></a>一、SMART概述</h1><pre><code> S.M.A.R.T（Self-Monitoring Analysis And Reporting Technology），即“自我监测、分析及报告技术”，是一种自动监控硬盘驱动器完好状况和报告潜在问题的技术标准。支持S.M.A.R.T技术的硬盘可以通过硬盘上的监测指令和主机上的监测软件对磁头、盘片、马达、电路的运行情况、历史记录及预设的安全值进行分析、比较。当出现安全值范围以外的情况时，就会自动向用户发出警告。

 最早期的硬盘监控技术起源于1992年，IBM在AS/400计算机的IBM 0662 SCSI 2代硬盘驱动器中使用了Predictive Failure Analysis（故障预警分析技术）的监控技术，它通过在固件中测量几个重要的硬盘安全参数和评估他们的情况，然后由监控软件得出两种结果：“硬盘安全”或“不久后会发生故障”。

 不久，当时的微机制造商康柏和硬盘制造商希捷、昆腾和康纳共同提出了名为IntelliSafe的类似技术。通过该技术，硬盘可以测量自身的健康指标并将参量值传送给操作系统和用户的监控软件中，每个硬盘生产商有权决定哪些指标需要被监控以及设定它们的安全阈值。

 1995年，康柏公司将该技术方案提交到Small Form Factor(SFF)委员会进行标准化，该方案得到IBM、希捷、昆腾、康纳和西部数据的支持，1996年6月进行了1.3版的修正，正式更名为S.M.A.R.T（Self-Monitoring Analysis And Reporting  Technology），即“自我检测分析与报告技术”。

 SMART的目的是监控硬盘的可靠性、预测磁盘故障和执行各种类型的磁盘自检。如今大部分的ATA/SATA、SCSI/SAS和固态硬盘都搭载内置的SMART系统。作为行业规范，SMART规定了硬盘制造厂商应该遵循的标准，满足SMART标准的条件主要包括： 

1)   在设备制造期间完成SMART需要的各项参数、属性的设定；

2)   允许用户自由开启和关闭SMART功能； 

3)   在特定系统平台下，能够正常使用SMART；通过BIOS检测，能够识别设备是否支持SMART并可显示相关信息，而且能辨别有效和失效的SMART信息； 

4)   在用户使用过程中，能提供SMART的各项有效信息，确定设备的工作状态，并能发出相应的修正指令或警告。在硬盘及操作系统都支持SMART技术并且开启的情况下，若硬盘状态不良，SMART技术能够在屏幕上显示英文警告信息。

 SMART不断从硬盘上的各个传感器收集信息，并把信息保存在硬盘的系统保留区(service area)内；这个区域一般位于硬盘0物理面的最前面几十个物理磁道，由厂商写入相关的内部管理程序。这里除了SMART信息表外还包括低级格式化程序、加密解密程序、自监控程序、自动修复程序等。用户可使用的监测软件，执行“SMART Return Status”命令（命令代码：B0h）对SMART信息进行读取，但此命令且不允许最终用户对信息进行修改。
</code></pre><h1 id="二、SMART的值和ID"><a href="#二、SMART的值和ID" class="headerlink" title="二、SMART的值和ID"></a>二、SMART的值和ID</h1><pre><code>SMART ID代码是用两位十六进制数表示的硬盘各项检测参数。目前，各硬盘制造商的绝大部分ID代码所代表的参数含义是一致的，但不同制造商的描述有微小差别，或者根据检测项目的多少增减ID代码。

SATA和SAS的SMART信息也是大同小异的。

SMART反映了各项参数的具体情况，主要包括临界值（Threshold）、当前值（Normalized value）、最差值（Worst）、数据值（Data或Raw value）。
</code></pre><h2 id="2-1-临界值Threshold"><a href="#2-1-临界值Threshold" class="headerlink" title="2.1 临界值Threshold"></a>2.1 临界值Threshold</h2><pre><code>临界值是硬盘厂商指定的表示某一项目可靠性的门限值，它通过特定公式计算而得。如果某个参数的当前值接近了临界值，就意味着硬盘将变得不可靠，可能导致数据丢失或者硬盘故障。由于临界值是硬盘厂商根据自己产品特性而确定的，因此用厂商提供的专用检测软件往往会跟Windows下检测软件的检测结果有较大出入。
</code></pre><h2 id="2-2-当前值（Normalized-value）"><a href="#2-2-当前值（Normalized-value）" class="headerlink" title="2.2 当前值（Normalized value）"></a>2.2 当前值（Normalized value）</h2><pre><code>当前值是各ID项在硬盘运行时根据实测数据通过公式计算的结果，计算公式由硬盘厂家自定。 硬盘出厂时各ID项目都有一个预设的最大正常值，即出厂值，这个预设的依据及计算方法为硬盘厂家保密，不同型号的硬盘都不同，最大正常值通常为100或200或253，新硬盘刚开始使用时显示的当前值可以认为是预设的最大正常值（有些ID项如温度等除外）。随着使用损耗或出现错误，当前值会根据实测数据而不断刷新并逐渐减小。

因此，当前值接近临界值就意味着硬盘寿命的减少，发生故障的可能性增大，所以当前值也是判定硬盘健康状态或推测寿命的依据之一。
</code></pre><h2 id="2-3-最差值（Worst）"><a href="#2-3-最差值（Worst）" class="headerlink" title="2.3 最差值（Worst）"></a>2.3 最差值（Worst）</h2><pre><code>最差值是对硬盘运行中某项数据变劣的峰值统计，该数值也会不断刷新。通常，最差值与当前值是相等的，如果最差值出现较大的波动（小于当前值），表明硬盘曾出现错误或曾经历过恶劣的工作环境（如温度）。
</code></pre><h2 id="2-4-数据值（Data或Raw-value）"><a href="#2-4-数据值（Data或Raw-value）" class="headerlink" title="2.4 数据值（Data或Raw value）"></a>2.4 数据值（Data或Raw value）</h2><pre><code>数据值是硬盘运行时各ID项参数的实测值，数据值代表的意义随参数而定，大致可以分为三类：

1）数据值是直接累计的，如Start/Stop Count（启动/停止计数）的数据是50，即表示该硬盘从出厂到现在累计启停了50次； 

2）有些参数的数据是即时数，如Temperature（温度）的数据值是44，表示硬盘的当前温度是44℃；

3）有些参数直接查看数据也能大致了解硬盘目前的工作状态；但是，也有很多数据值并不直接反映硬盘状态，必须经过硬盘内置的计算公式换算成当前值才能得出结果.
</code></pre><h2 id="2-5-TYPE"><a href="#2-5-TYPE" class="headerlink" title="2.5 TYPE"></a>2.5 TYPE</h2><pre><code>属性的类型（Pre-fail或Oldage）。Pre-fail类型的属性可被看成一个关键属性，表示参与磁盘的整体SMART健康评估是否通过（PASSED/FAILED）。如果任何Pre-fail类型的属性故障，那么可视为磁盘将要发生故障。另一方面，Oldage类型的属性可被看成一个非关键的属性（如正常的磁盘磨损），表示不会使磁盘本身发生故障。
</code></pre><h2 id="2-6-UPDATED"><a href="#2-6-UPDATED" class="headerlink" title="2.6 UPDATED"></a>2.6 UPDATED</h2><pre><code>表示属性的更新频率。Offline代表磁盘上执行离线测试的时间。
</code></pre><h2 id="2-7-WHEN-FAILED"><a href="#2-7-WHEN-FAILED" class="headerlink" title="2.7 WHEN_FAILED"></a>2.7 WHEN_FAILED</h2><pre><code>如果VALUE小于等于THRESH，会被设置成“FAILING_NOW”；如果WORST小于等于THRESH会被设置成“In_the_past”；如果都不是，会被设置成“-”。在“FAILING_NOW”情况下，需要尽快备份重要 文件，特别是属性是Pre-fail类型时。“In_the_past”代表属性已经故障了，但在运行测试的时候没问题。“-”代表这个属性从没故障过。
</code></pre><h1 id="三、SMART状态（Status）和参数详解"><a href="#三、SMART状态（Status）和参数详解" class="headerlink" title="三、SMART状态（Status）和参数详解"></a>三、SMART状态（Status）和参数详解</h1><h2 id="3-1-SATA-SMART日志示例"><a href="#3-1-SATA-SMART日志示例" class="headerlink" title="3.1 SATA SMART日志示例"></a>3.1 SATA SMART日志示例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">=== START OF READ SMART DATA SECTION ===</span><br><span class="line">SMART overall-health self-assessment test result: PASSED</span><br><span class="line"></span><br><span class="line">General SMART Values:</span><br><span class="line">Offline data collection status:  (0x82)	Offline data collection activity</span><br><span class="line">					was completed without error.</span><br><span class="line">					Auto Offline Data Collection: Enabled.</span><br><span class="line">Self-test execution status:      (   0)	The previous self-test routine completed</span><br><span class="line">					without error or no self-test has ever </span><br><span class="line">					been run.</span><br><span class="line">Total time to complete Offline </span><br><span class="line">data collection: 		(  113) seconds.</span><br><span class="line">Offline data collection</span><br><span class="line">capabilities: 			 (0x5b) SMART execute Offline immediate.</span><br><span class="line">					Auto Offline data collection on/off support.</span><br><span class="line">					Suspend Offline collection upon new</span><br><span class="line">					command.</span><br><span class="line">					Offline surface scan supported.</span><br><span class="line">					Self-test supported.</span><br><span class="line">					No Conveyance Self-test supported.</span><br><span class="line">					Selective Self-test supported.</span><br><span class="line">SMART capabilities:            (0x0003)	Saves SMART data before entering</span><br><span class="line">					power-saving mode.</span><br><span class="line">					Supports SMART auto save timer.</span><br><span class="line">Error logging capability:        (0x01)	Error logging supported.</span><br><span class="line">					General Purpose Logging supported.</span><br><span class="line">Short self-test routine </span><br><span class="line">recommended polling time: 	 (   2) minutes.</span><br><span class="line">Extended self-test routine</span><br><span class="line">recommended polling time: 	 ( 571) minutes.</span><br><span class="line">SCT capabilities: 	       (0x003d)	SCT Status supported.</span><br><span class="line">					SCT Error Recovery Control supported.</span><br><span class="line">					SCT Feature Control supported.</span><br><span class="line">					SCT Data Table supported.</span><br><span class="line"></span><br><span class="line">SMART Attributes Data Structure revision number: 16</span><br><span class="line">Vendor Specific SMART Attributes with Thresholds:</span><br><span class="line">ID# ATTRIBUTE_NAME          FLAG     VALUE WORST THRESH TYPE      UPDATED  WHEN_FAILED RAW_VALUE</span><br><span class="line">  1 Raw_Read_Error_Rate     0x000b   093   093   016    Pre-fail  Always       -       1703946</span><br><span class="line">  2 Throughput_Performance  0x0005   137   137   054    Pre-fail  Offline      -       104</span><br><span class="line">  3 Spin_Up_Time            0x0007   100   100   024    Pre-fail  Always       -       0</span><br><span class="line">  4 Start_Stop_Count        0x0012   100   100   000    Old_age   Always       -       4</span><br><span class="line">  5 Reallocated_Sector_Ct   0x0033   087   087   005    Pre-fail  Always       -       3</span><br><span class="line">  7 Seek_Error_Rate         0x000b   100   100   067    Pre-fail  Always       -       0</span><br><span class="line">  8 Seek_Time_Performance   0x0005   128   128   020    Pre-fail  Offline      -       18</span><br><span class="line">  9 Power_On_Hours          0x0012   100   100   000    Old_age   Always       -       6318</span><br><span class="line"> 10 Spin_Retry_Count        0x0013   100   100   060    Pre-fail  Always       -       0</span><br><span class="line"> 12 Power_Cycle_Count       0x0032   100   100   000    Old_age   Always       -       4</span><br><span class="line">192 Power-Off_Retract_Count 0x0032   100   100   000    Old_age   Always       -       343</span><br><span class="line">193 Load_Cycle_Count        0x0012   100   100   000    Old_age   Always       -       343</span><br><span class="line">194 Temperature_Celsius     0x0002   162   162   000    Old_age   Always       -       37 (Min/Max 23/42)</span><br><span class="line">196 Reallocated_Event_Count 0x0032   100   100   000    Old_age   Always       -       3</span><br><span class="line">197 Current_Pending_Sector  0x0022   087   087   000    Old_age   Always       -       4600</span><br><span class="line">198 Offline_Uncorrectable   0x0008   100   100   000    Old_age   Offline      -       282</span><br><span class="line">199 UDMA_CRC_Error_Count    0x000a   200   200   000    Old_age   Always       -       0</span><br></pre></td></tr></table></figure>
<h2 id="3-2-SATA-SMART的参数详解"><a href="#3-2-SATA-SMART的参数详解" class="headerlink" title="3.2 SATA SMART的参数详解"></a>3.2 SATA SMART的参数详解</h2><pre><code>属性描述(Attribute Description)即检测项目名称。可由厂商自定义增减，由于ATA标准不断更新，有时候同一品牌的不同型号产品也会有所不同。

有背景颜色的属性，都是需要重点对待的。
</code></pre><p><font color="#dd0000">01h(001) Raw Read Error Rate 底层数据读取错误率</font><br> </p>
<pre><code>数据为0或任意值，当前值应远大于与临界值。

底层数据读取错误率是磁头从磁盘表面读取数据时出现的错误，对某些硬盘来说，大于0的数据表明磁盘表面或者读写磁头发生问题，如介质损伤、磁头污染、磁头共振等等。不过对希捷硬盘来说，许多硬盘的这一项会有很大的数据量，这不代表有任何问题，主要是看当前值下降的程度。

在固态硬盘中，此项的数据值包含了可校正的错误与不可校正的RAISE错误（UECC＋URAISE）。
</code></pre><p><font color="#dd0000">02h(002) Throughput Performance 读写通量性能</font><br></p>
<pre><code>此参数表示硬盘的读写通量性能，数据值越大越好。当前值如果偏低或趋近临界值，表示硬盘存在严重的问题，但现在的硬盘通常显示数据值为0或根本不显示此项，一般在进行了人工脱机SMART测试后才会有数据量。
</code></pre><p>03h(003) Spin-Up Time 硬盘主轴起转时间</p>
<pre><code>主轴起旋时间就是主轴电机从启动至达到额定转速所用的时间，数据值直接显示时间，单位为毫秒或者秒，因此数据值越小越好。不过对于正常硬盘来说，这一项仅仅是一个参考值，硬盘每次的启动时间都不相同，某次启动的稍慢些也不表示就有问题。 

硬盘的主轴电机从启动至达到额定转速大致需要4秒～15秒左右，过长的启动时间说明电机驱动电路或者轴承机构有问题。一旦这一参数的数据值在某些型号的硬盘上总是为0，这就要看当前值和最差值来判断了。  

对于固态硬盘来说，所有的数据都是保存在半导体集成电路中，没有主轴电机，所以这项没有意义，数据固定为0，当前值固定为100。
</code></pre><p><font color="#dd0000">04h(004) Start/Stop Count 马达启停次数(又称加电次数)</font><br></p>
<pre><code>这一参数的数据是累计值，表示硬盘主轴电机启动/停止的次数，新硬盘通常只有几次，以后会逐渐增加。系统的某些功能如空闲时关闭硬盘等会使硬盘启动/停止的次数大为增加，在排除定时功能的影响下，过高的启动/停止次数（远大于通电次数0C）暗示硬盘电机及其驱动电路可能有问题。  

这个参数的当前值是依据某种公式计算的结果，例如对希捷某硬盘来说临界值为20，当前值是通过公式“100－（启停计数/1024）”计算得出的。若新硬盘的启停计数为0，当前值为100－(0/1024)＝100，随着启停次数的增加，该值不断下降，当启停次数达到81920次时，当前值为100－(81920/1024)＝20，已达到临界值，表示从启停次数来看，该硬盘已达设计寿命，当然这只是个寿命参考值，并不具有确定的指标性。  

这一项对于固态硬盘同样没有意义，数据固定为0，当前值固定为100。
</code></pre><p><font color="#dd0000">05h(005) Relocated Sector Count 重映射扇区数（Glist）</font><br></p>
<pre><code>数据应为0，当前值应远大于临界值。

这项参数的数据值直接表示已经被重映射扇区的数量，当前值则随着数据值的增加而持续下降。当发现此项的数据值不为零时，要密切注意其发展趋势，若能长期保持稳定，则硬盘还可以正常运行；若数值不断上升，说明不良扇区不断增加，硬盘已处于不稳定状态，应当考虑更换了。如果当前值接近或已到达临界值（此时的数据值并不一定很大，因为不同硬盘保留的备用扇区数并不相同），表示缺陷表已满或备用扇区已用尽，已经失去了重映射功能，再出现不良扇区就会显现出来并直接导致数据丢失。  

 这一项不仅是硬盘的寿命关键参数，而且重映射扇区的数量也直接影响硬盘的性能，例如某些硬盘会出现数据量很大，但当前值下降不明显的情况，这种硬盘尽管还可正常运行，但也不宜继续使用。因为备用扇区都是位于磁盘尾部（靠近盘片轴心处），大量的使用备用扇区会使寻道时间增加，硬盘性能明显下降。
</code></pre><p><font color="#dd0000">07h(007) Seek Error Rate 寻道错误率</font><br></p>
<pre><code>数据应为0或者远远大于0，当前值应远大于与临界值。  

这一项表示磁头寻道时的错误率，有众多因素可导致寻道错误率上升，如磁头组件的机械系统、伺服电路有局部问题，盘片表面介质不良，硬盘温度过高等。

如果这里接近阈值，就说明硬盘马上就要挂了。
</code></pre><p>08h(008) Seek Time Performance 寻道性能</p>
<pre><code>此项表示硬盘寻道操作的平均性能（寻道速度），通常与前一项（寻道错误率）相关联。当前值持续下降标志着磁头组件、寻道电机或伺服电路出现问题，但现在许多硬盘并不显示这一项。
</code></pre><p>09h(009) Power-On Hours硬盘加电时间</p>
<pre><code>此参数表示硬盘自出厂以来加电启动的统计时间，单位为小时。
</code></pre><p><font color="#dd0000">0Ah(010) Spin up Retry Count 马达起转重试次数(即硬盘启动重试次数)</font><br></p>
<pre><code>数据应为0，当前值应大于临界值。

主轴电机在一次加速至正常速度失败后尝试重新继续加速到正常运行速度的统计数；这个数值的增加说明电机驱动或者机械子系统出现问题，也可能是整机供电不足。
</code></pre><p><font color="#dd0000">0Bh(011) Calibration Retry Count 磁头校准重试次数</font><br></p>
<pre><code>数据应为0，当前值应远大于与临界值。

磁头在一次运行失败时尝试校准至正常状态的统计数，这个数值的增加表示点击驱动电路或者机械子系统出现问题。
</code></pre><p>0Ch(012) Power Cycle Count  通电周期计数</p>
<pre><code>通电周期计数的数据值表示了硬盘通电/断电的次数，即电源开关次数的累计，反映硬盘寿命的一个参考值。
</code></pre><p>0Dh(013) Soft Read Error Rate 软件读取错误率</p>
<pre><code>软件读取错误率也称为可校正的读取误码率，就是报告给操作系统的未经校正的读取错误。数据值越低越好，过高则可能暗示盘片磁介质有问题。
</code></pre><p>B4h(180) Unused Reserved Block Count Total未用的备用块计数（惠普） </p>
<pre><code>固态硬盘会保留一些容量来准备替换损坏的存储单元，所以可用的预留空间数是非常重要的。这个参数的当前值表示尚未使用的预留的存储单元数量。
</code></pre><p>B7h(183) SATA Downshift Error Count 串口降速错误计数</p>
<pre><code>这一项表示SATA接口速率错误下降的次数。通常硬盘与主板之间的兼容问题会导致SATA传输级别降级运行。
</code></pre><p>B8h(184) End to End Error Detection Count 端到端错误检测次数</p>
<pre><code>Intel第二代的34nm固态硬盘有点到点错误检测计数这一项。固态硬盘里有一个LBA（logical block addressing，逻辑块地址）记录，这一项显示了SSD内部逻辑块地址与真实物理地址间映射的出错次数。
</code></pre><p>BBh(187) Reported Uncorrectable Errors 无法校正的错误</p>
<pre><code>报告给OS的无法通过硬件ECC校正的错误，如果数值大于0，应该注意硬盘安全，甚至备份数据。
</code></pre><p>BCh(188) Command Timeout  通信超时</p>
<pre><code>由于无法连接至硬盘而终止操作的统计数，一般为0，如果远超过0，则可能电源供电问题或数据线接口氧化，也可能是硬盘出现更严重的问题。
</code></pre><p>BDh189) High Fly Writes 高飞写入</p>
<pre><code>这一项的数据值就统计了写入时磁头飞行高度出现偏差的次数。硬盘进行写入时对磁头高度进行监控以提供额外的保障;当磁头处于不正常高度进行写入时，写入操作会被终止，原有数据重写入或者将该扇区重映射到安全区域,该属性是统计值。
</code></pre><p>BEh(190) Airflow Temperature 气流温度</p>
<pre><code>这一项表示的是硬盘内部盘片表面的气流温度。在希捷公司的某些硬盘中，当前值=（100－当前温度），因此气流温度越高，当前值就越低，最差值则是当前值曾经到达过的最低点，临界值由制造商定义的最高允许温度来确定，而数据值不具实际意义。许多硬盘也没有这一项参数。
</code></pre><p>BFh(191) G-sense Error Rate 冲击错误率</p>
<pre><code>这一项的数值记录了硬盘受到机械冲击导致出错的频度。
</code></pre><p>C0h(192) Power-Off Retract Count断电返回计数 </p>
<pre><code>此参数表示不安全断电时候磁头返回的次数。但要注意这个参数对某些硬盘来说，仅记录意外断电时磁头的返回动作；而某些硬盘记录了所有（包括休眠、待机，但不包括关机时）的磁头返回动作；还有些硬盘这一项没有记录。

因此这一参数的数据值在某些硬盘上持续为0或稍大于0，但在另外的硬盘上则会大于通电周期计数（0C）或启停计数（04）的数据。在一些新型节能硬盘中，这一参数的数据量还与硬盘的节能设计相关，可能会远大于通电周期计数（0C）或启停计数（04）的数据，但又远小于磁头加载/卸载计数（C1）的数据量。

对于固态硬盘来说，虽然没有磁头的加载/卸载操作，但这一项的数据量仍然代表了不安全关机，即发生意外断电的次数。
</code></pre><p>C1h(193) Load Cycle Count 磁头加载/卸载次数</p>
<pre><code>这个参数的数据值就是磁头执行加载/卸载操作的累计次数。从原理上讲，这个加载/卸载次数应当与硬盘的启停次数相当，但对于笔记本内置硬盘以及台式机新型节能硬盘来说，这一项的数据量会很大。这是因为磁头臂组件设计有一个固定的返回力矩，保证在意外断电时磁头能靠弹簧力自动离开盘片半径范围，迅速返回停靠架。所以要让硬盘运行时磁头保持在盘片的半径之内，就要使磁头臂驱动电机（寻道电机）持续通以电流。而让磁头臂在硬盘空闲几分钟后就立即执行卸载动作，返回到停靠架上，既有利于节能，又降低了硬盘受外力冲击导致磁头与盘片接触的概率。虽然再次加载会增加一点寻道时间，但毕竟弊大于利，所以在这类硬盘中磁头的加载/卸载次数会远远大于通电周期计数（0C）或启停计数（04）的数据量。不过这种加载/卸载方式已经没有了磁头与盘片的接触，所以设计值也已大大增加，通常笔记本内置硬盘的磁头加载/卸载额定值在30～60万次，而台式机新型节能硬盘的磁头加载/卸载设计值可达一百万次。
</code></pre><p><font color="#dd0000">C2h(194) Temperature 温度</font><br></p>
<pre><code>这个数值直接表示了硬盘内部的当前温度。硬盘运行时最好不要超过45℃，温度过高虽不会导致数据丢失，但引起的机械变形会导致寻道与读写错误率上升，降低硬盘性能。硬盘的最高允许运行温度可查看硬盘厂商给出的数据，一般不会超过60℃。
</code></pre><p>C3h(195) Hardware ECC Recovered  </p>
<pre><code>这个数值记录了磁头在盘片上读写时通过ECC技术校正错误的次数，不过许多硬盘有其制造商特定的数据结构，因此数据量的大小并不能直接说明问题。
</code></pre><p>C4h(196) Reallocation Event Count 重映射事件计数</p>
<pre><code>数据值应为0，当前值应该远大于临界值。

记录已重映射操作的计数，无论是否成功转移，都会被计数。反映了硬盘已经存在了不良扇区。
</code></pre><p><font color="#dd0000">C5h(197) Current Pending Sector Count 当前待映射扇区计数</font><br></p>
<pre><code>数据值应为0，当前值应该远大于临界值。

记录了不稳定的扇区的数量，即等待被映射的扇区。如果不稳定扇区在随后的读写中成功了，那么此扇区就不再列入等待的范围，数值会下降。仅仅读取时出错的扇区并不会导致重映射，只是被列入“等待”，也许以后读取就没有问题，所以只有在写入失败时才会发生重映射。下次对该扇区写入时如果继续出错，就会产生一次重映射操作，此时重映射扇区计数（05）与重映射事件计数（C4）的数据值增加，此参数的数据值下降。
</code></pre><p><font color="#dd0000">C6h(198) Offline Uncorrectable Sector Count 脱机无法校正的扇区计数</font><br></p>
<pre><code>数据应为0，当前值应远大于临界值。 

这个参数的数据累计了读写扇区时发生的无法校正的错误总数。数值上升表明盘片表面介质或机械子系统出现问题，有些扇区肯定已经不能读取，如果有文件正在使用这些扇区，操作系统会返回读盘错误的信息。下一次写操作时会对该扇区执行重映射。
</code></pre><p><font color="#dd0000">C7h(199) UDMA CRC Error CountULTRA DMA访问校验错误率</font><br></p>
<p><font color="#dd0000">C7h(199) Ultra ATA CRC Error Rate  Ultra DMA访问校验错误率</font><br></p>
<pre><code>这个参数的数据值累计了通过接口循环冗余校验（Interface Cyclic Redundancy Check，ICRC）发现的数据线传输错误的次数。如果数据值不为0且持续增长，表示“硬盘控制器→数据线→硬盘接口”出现错误，劣质的数据线、接口接触不良都可能导致此现象。由于这一项的数据值不会复零，所以某些新硬盘也会出现一定的数据量，只要更换数据线后数值不再继续增长，即表示问题已得到解决。
</code></pre><p>C8h(200) Multi-zone Error Rate 多区域错误率</p>
<p><font color="#dd0000">C8h(200) Write Error Rate 写入错误率</font><br></p>
<pre><code>数据应为0，当前值应远大于临界值。  

这个参数的数据累计了向扇区写入数据时出现错误的总数。有的新硬盘也会有一定的数据量，若数值持续快速升高（当前值偏低），表示盘片、磁头组件可能有问题。  
</code></pre><p>CEh(206) Flying Height 磁头飞行高度</p>
<pre><code>磁头距离盘片表面的垂直距离。高度过低则增加了磁头与盘片接触导致损坏的可能性；高度偏高则增大了读写错误率。不过准确地说，硬盘中并没有任何装置可以直接测出磁头的飞行高度，制造商也只是根据磁头读取的信号强度来推算磁头飞行高度。
</code></pre><p>CFh(207) Spin High Current 主轴过电流</p>
<pre><code>数值记录了主轴电机运行时出现浪涌电流的次数，数据量的增加意味着轴承或电机可能有问题。
</code></pre><p>D0h(208) Spin Buzz 主轴电机重启次数</p>
<pre><code>数值记录了主轴电机反复尝试启动的次数，这通常是由于电源供电不足引起的。
</code></pre><p>DCh(220) Disk Shift 盘片偏移量</p>
<pre><code>硬盘中的盘片相对主轴的偏移量（通常是受外力冲击或温度变化所致），单位未知，数据值越小越好。
</code></pre><p>F1h(241) Total LBAs Written LBA写入总数</p>
<pre><code>LBA写入数的累计。
</code></pre><p>F2h(242) Total LBAs Read LBA读取总数</p>
<pre><code>LBA读取数的累计。某些SMART读取工具会显示负的数据值，是因为采用了48位LBA，而不是32位LBA。
</code></pre><p>FEh(254) Free Fall Protection  自由坠落保护</p>
<pre><code>现在有些笔记本硬盘具有自由坠落保护功能，当硬盘内置的加速度探测装置检测到硬盘位移时，会立即停止读写操作，将磁头臂复位。这个措施防止了磁头与盘片之间发生摩擦撞击，提高了硬盘的抗震性能。这个参数的数据里记录了这一保护装置动作的次数。
</code></pre><h2 id="3-3-SAS-SMART日志示例"><a href="#3-3-SAS-SMART日志示例" class="headerlink" title="3.3 SAS SMART日志示例"></a>3.3 SAS SMART日志示例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">=== START OF READ SMART DATA SECTION ===</span><br><span class="line">SMART Health Status: OK</span><br><span class="line"></span><br><span class="line">Current Drive Temperature:     31 C</span><br><span class="line">Drive Trip Temperature:        65 C</span><br><span class="line"></span><br><span class="line">Manufactured in week 31 of year 2017</span><br><span class="line">Specified cycle count over device lifetime:  50000</span><br><span class="line">Accumulated start-stop cycles:  21</span><br><span class="line">Specified load-unload count over device lifetime:  600000</span><br><span class="line">Accumulated load-unload cycles:  22</span><br><span class="line">Elements in grown defect list: 0</span><br><span class="line"></span><br><span class="line">Error counter log:</span><br><span class="line">           Errors Corrected by           Total   Correction     Gigabytes    Total</span><br><span class="line">               ECC          rereads/    errors   algorithm      processed    uncorrected</span><br><span class="line">           fast | delayed   rewrites  corrected  invocations   [10^9 bytes]  errors</span><br><span class="line">read:       2155        1         0         0          0       6621.256           0</span><br><span class="line">write:         0        0         0         0          0        177.814           0</span><br><span class="line"></span><br><span class="line">Non-medium error count:        1</span><br><span class="line"></span><br><span class="line">SMART Self-test log</span><br><span class="line">Num  Test              Status                 segment  LifeTime  LBA_first_err [SK ASC ASQ]</span><br><span class="line">     Description                              number   (hours)</span><br><span class="line"># 1  Background long   Completed                   -       4                 - [-   -    -]</span><br><span class="line">Long (extended) Self Test duration: 7411 seconds [123.5 minutes]</span><br></pre></td></tr></table></figure>
<h2 id="3-4-SAS-SMART参数详解"><a href="#3-4-SAS-SMART参数详解" class="headerlink" title="3.4 SAS SMART参数详解"></a>3.4 SAS SMART参数详解</h2><pre><code>SATA和SAS的SMART日志内容格式不一样，ID参数也不一样，但是参数含义大同小异；由于SATA盘的smart信息较全，因此本文档以SATA的参数解释为主，SAS盘的参数解释请参考SATA盘的。

SAS盘的smart信息少，最为直观且重要的一项指标是“Elements in grown defect list”，即Glist。&quot; Error counter log:Total uncorrected errors:&quot;   10就建议更换。

“Non-medium error count” 非介质错误计数。正常是0；一般可能的原因为是电缆、传输、校验问题，可以忽略。
</code></pre><h2 id="3-5-硬盘坏道表PList和GList"><a href="#3-5-硬盘坏道表PList和GList" class="headerlink" title="3.5 硬盘坏道表PList和GList"></a>3.5 硬盘坏道表PList和GList</h2><pre><code>硬盘的数据密度很大，在生产过程中不可避免地会产生缺陷，同时在使用过程中，那些不稳定的扇区也会逐渐老化而产生数据读写错误，这些缺陷和不稳定扇区会严重威胁硬盘数据的安全。为此，硬盘设计了两个坏道表来处理这些有缺陷的扇区，即P-list和G-list，它们用于记录硬盘的缺陷扇区的情况，使硬盘工作时不会在缺陷扇区里读写数据，防止数据损坏。

坏道的产生可以分为两种情况：一是生产过程中产生的缺陷扇区，二是使用过程的产生的缺陷扇区。硬盘设计两个坏道表就是用于分别识别和处理硬盘的两种不同的坏道的。
</code></pre><p>P-list (Primary Defect List) 基本缺陷列表</p>
<pre><code>在每个硬盘在生产的时候，其实不可避免会产生有部分碟片磁介质不均匀，或者有损坏的地区，对于这部分在生产过程中产生的不稳定的扇区，工厂就会使用一个PLIST 来记录下来。
</code></pre><p>P-list叫做“永久缺陷表”，这些记录地址在硬盘运行时候自动被跳过，所以P-list不影响硬盘的存取速度。</p>
<p>G-list (Grown Defect List) 成长缺陷列表</p>
<pre><code> 称为增长坏道表，这些记录地址随着用户使用硬盘，硬盘检测到某些区域可能存在缺陷（坏扇区），自动重新映射到出厂时预留的空间。

用来保护用户数据的访问安全。由于G-list带来的是重映射，而非跳过，也就意味着硬盘首先寻找到坏的区域然后再映射到安全区域，这样就会造成硬盘存取速度的减慢。
</code></pre><h1 id="四、DST硬盘自检"><a href="#四、DST硬盘自检" class="headerlink" title="四、DST硬盘自检"></a>四、DST硬盘自检</h1><pre><code>DST（Drive Self Test），硬盘自测试，通过一定的算法，实现硬盘的诊断和SMART刷新。DST主要分为三种测试类型：Short DST、Long DST(SATA硬盘又称其为Extended Self Test)、Conveyance DST。在DST离线的测试完成后，硬盘会把测试的结果刷新到Self test log。

DST主要包括spindup马达磁头臂起转测试、Buffer RAM/Flash ROM检测、伺服定位功能检测、寻道测试、读写磁头检测、读写校验测试、低级格式化功能检测、碟片缺陷检测，部分厂家的DST还会进行日志事件异常检测以及SMART检测等等。
</code></pre>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/硬盘/" rel="tag"># 硬盘</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/MegaCli常用命令.html" rel="next" title="MegaCli常用命令">
                <i class="fa fa-chevron-left"></i> MegaCli常用命令
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/Ansible基础篇 - Ansible介绍.html" rel="prev" title="Ansible基础篇 - Ansible介绍">
                Ansible基础篇 - Ansible介绍 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">QiFei</p>
              <p class="site-description motion-element" itemprop="description">SRE运维工程师</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zhuqifei1994" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zhuqifei1994@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、SMART概述"><span class="nav-number">1.</span> <span class="nav-text">一、SMART概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、SMART的值和ID"><span class="nav-number">2.</span> <span class="nav-text">二、SMART的值和ID</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-临界值Threshold"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 临界值Threshold</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-当前值（Normalized-value）"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 当前值（Normalized value）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-最差值（Worst）"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 最差值（Worst）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-数据值（Data或Raw-value）"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 数据值（Data或Raw value）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-TYPE"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 TYPE</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-6-UPDATED"><span class="nav-number">2.6.</span> <span class="nav-text">2.6 UPDATED</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-7-WHEN-FAILED"><span class="nav-number">2.7.</span> <span class="nav-text">2.7 WHEN_FAILED</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、SMART状态（Status）和参数详解"><span class="nav-number">3.</span> <span class="nav-text">三、SMART状态（Status）和参数详解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-SATA-SMART日志示例"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 SATA SMART日志示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-SATA-SMART的参数详解"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 SATA SMART的参数详解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-SAS-SMART日志示例"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 SAS SMART日志示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-SAS-SMART参数详解"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 SAS SMART参数详解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-硬盘坏道表PList和GList"><span class="nav-number">3.5.</span> <span class="nav-text">3.5 硬盘坏道表PList和GList</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、DST硬盘自检"><span class="nav-number">4.</span> <span class="nav-text">四、DST硬盘自检</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>

  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">QiFei</span>

  
</div>



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
